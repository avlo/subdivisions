services:
#  SC Redis 6379
  superconductor-db:
    image: "redis:8.0.0"
    hostname: superconductor-db
    ports:
      - "6379:6379"
    healthcheck:
      test: [ "CMD", "redis-cli" ,"ping", "superconductor-db" ]
      retries: 3
      interval: 1s
      timeout: 2s
    networks:
      - docker_network
#  SC App 5555
  superconductor-subdivisions:
    image: avlo/superconductor-app-redis:1.17.2
    ports:
      - "5555:5555"
    healthcheck:
      test: [ "CMD", "wget", "--no-verbose", "--spider", "http://localhost:5555/api-tests.html" ]
      retries: 3
      interval: 1s
      timeout: 3s
      start_period: 3s
    depends_on:
      superconductor-db:
        condition: service_healthy
    networks:
      - docker_network
    environment:
      SPRING_PROFILES_ACTIVE: local_ws
      SPRING_DATA_REDIS_HOST: superconductor-db
      SUPERCONDUCTOR_RELAY_URL: ws://localhost:5555
      SUPERCONDUCTOR_KEY_PRIVATE: fa11661b5f43c8f18f11861b4d553c47337dac9e351083b27320e311b7b324ac
      SUPERCONDUCTOR_KEY_PUBLIC: e04e1c1c30df6058433f61681644fd24914f2e02e420496086c61f53eb504c04
#
volumes:
  superconductor-db:
    driver: local
networks:
  docker_network:
    driver: bridge
